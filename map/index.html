
<!DOCTYPE html>
<html>
<head>
	<title>to Africa?</title>
	<meta charset="utf-8" />

	<meta name="viewport" content="width=device-width, initial-scale=1.0">

	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.css" />
	<!--[if lte IE 8]>
	<link rel="stylesheet" href="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet.ie.css" />
	<![endif]-->

	<style>
		html, body, #map {
			width: 100%;
			height: 100%;
			padding: 0;
			margin: 0;
		}

		.info {
			width: 300px;
			padding: 6px 8px;
			font: 14px/16px Arial, Helvetica, sans-serif;
			background: white;
			background: rgba(255,255,255,0.8);
			box-shadow: 0 0 15px rgba(0,0,0,0.2);
			border-radius: 5px;
		}
		.info h4 {
			margin: 0 0 5px;
			color: #777;
		}

		.legend {
			text-align: left;
			line-height: 18px;
			color: #555;
		}
		.legend i {
			width: 18px;
			height: 18px;
			float: left;
			margin-right: 8px;
			opacity: 0.7;
		}
	</style>
</head>
<body>
	<div id="map"></div>

	<script src="http://cdn.leafletjs.com/leaflet-0.6.4/leaflet-src.js"></script>
	<script src="Polyline.encoded.js"></script>
	<script src="//cdnjs.cloudflare.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>
	<script src="https://maps.googleapis.com/maps/api/js?v=3.exp&sensor=false"></script>

	<script type="text/javascript">

		var map = L.map('map').setView([40, 0], 2);
		var poly;

		var baselayer = L.tileLayer('http://{s}.tile.stamen.com/watercolor/{z}/{x}/{y}.jpg', {
			attribution: 'Map tiles by <a href="http://stamen.com">Stamen Design</a>, <a href="http://creativecommons.org/licenses/by/3.0">CC BY 3.0</a> &mdash; Map data &copy; <a href="http://openstreetmap.org">OpenStreetMap</a> contributors, <a href="http://creativecommons.org/licenses/by-sa/2.0/">CC-BY-SA</a>',
			subdomains: 'abcd',
			minZoom: 2,
			maxZoom: 16,
			opacity: 0.6
		}).addTo(map);


		// control that shows state info on hover
		var info = L.control();

		info.onAdd = function (map) {
			this._div = L.DomUtil.create('div', 'info');
			this.update();
			return this._div;
		};

		info.update = function (props) {
			if (poly && map && map.hasLayer(poly) && poly.bringToFront) {
				poly.bringToFront();
			}
			this._div.innerHTML = '<h4>Travel advice Dutch foreign affairs</h4>' +  (props ?
				'<strong>' + props.name + '</strong><br />' +
				props.advice
				: 'Hover over a country');
		};

		info.addTo(map);


		// get color depending on population density value
		function getColor(advice) {
			if (!advice) {
				return null;
			}
			switch(advice.trim()) {
			case "Alle reizen worden ontraden": 
			case "Alle reizen naar bepaalde gebieden worden ontraden": 
				return '#ff0000';

			case 'Niet-essentiële reizen worden ontraden': 
			case 'Niet-essentiële reizen naar bepaalde gebieden worden ontraden': 
				return '#FF7F00';

			case "Extra waakzaamheid betrachten": 
			case "Waakzaamheid betrachten": 
				return '#aaff00';

			case "Geen bijzondere veiligheidsrisico's": return '#00aa00';
			case '': return '#000000';
			}
		}

		function style(feature) {
			var s = {
				weight: 1,
				opacity: 1,
				color: '#666',
				dashArray: [1, 4],
			};
			var color = getColor(feature.properties.advice);
			if (color) {
				L.extend(s, {
					fillOpacity: 0.5,
					fillColor: color
				});
			}

			return s;
		}

		function highlightFeature(e) {
			var layer = e.target;

			layer.setStyle({
				weight: 2,
				color: '#666',
				dashArray: '',
				fillOpacity: 0.7
			});

			info.update(layer.feature.properties);

			if (!L.Browser.ie && !L.Browser.opera) {
				layer.bringToFront();
			}

		}

		var geojson;

		function resetHighlight(e) {
			geojson.resetStyle(e.target);
			info.update();
		}

		function zoomToFeature(e) {
			map.fitBounds(e.target.getBounds());
		}

		function onEachFeature(feature, layer) {
			layer.on({
				mouseover: highlightFeature,
				mouseout: resetHighlight,
				click: zoomToFeature
			});
		}
		$.getJSON('../NL-travel-advice.json', function (travel_advice) {
			geojson = L.geoJson(null, {
				style: style,
				onEachFeature: onEachFeature
			}).addTo(map);
			$.ajax({
				url: 'world.geojson',
				dataType: 'json',
				success: function (data) {
					data.features.forEach(function (country) {
						L.extend(country.properties, travel_advice[country.id], {
							id: country.id
						});

						geojson.addData(country).bringToBack();
					});
				}
			});

		});
		var encoded1 = 'onm|Hi_rY|zqAyofAt_cAx_y@viUh{cAjaqArfyDfd}@`fZ~j}Dn`w@voxBnhcAf|}@xfsAxy|BjoItfeBmkc@ri|@i}fAntyBacbAtji@_ldAnelAmkEvh_BooJljpBg{IvqxArbd@~kmAk{p@hpo@ipZfjcAfohA~iaCven@zmeAupObax@h|]rbsAj`qC~w|@pryCptvCjzoDf}jBhj}Azpn@fus@d_r@fvBpbsAtqYj_a@aiWrin@`{WdxVeoFvs@qrFx_C}yA|mhCimcL`kaDsxsGjr@taCbtBcgBtcC{bVjkA}lIrnOcjYh|Km_c@~`a@_tm@|u`@egA~vnBooQ|ucAuqu@nx^tjSr|s@kxL``hA~noAz{}@~_p@|~_Ao_l@bjm@_e[~f~@vku@~_h@tgQd}N_m]d_Ym_RxrTfkAfxr@rfFrso@sfOtphDp_m@j_vAp|b@n`n@js~@|aqCxvVbnrDv|gAl`~D}qOhcdD`uX|daFwwbCvgpB_xn@pb]ej_Azwj@uulApl{Bu`uCj{{Bwwf@zduD{pj@l|Yqcf@htb@peIpnaCuh]vkxEmxYrseEcnEdom@zrEfjT{sQihI__`Axdz@c{bB~abAijzBpfoDyuj@lvbCsgc@~tp@adi@`voBp|RlpfCyrDl``B_yiBrek@kqtAngyBppXbo_Dcyq@zkiDrcGz}|@||C~l`@a{e@rcy@}am@lh`@feHls{@i{a@due@{djC`fdA{{rAvttAqrtAhf}@owLfvt@syh@xqJkuu@v{u@u{jAjmwD_kHze~AuiFbwuB{o_AvkrCqySrg_CrmUzwWtlf@jya@kuXpgfBvft@hrr@b`ThqYdmXtnOtwf@bwiAv|FvhhA|dUcdFivBsyyA{n}@qbb@ox|Cl|F_rpCaiXeomAofs@k}i@{nzAotAuqq@{kgAwoi@ok[bwI{aTlkEivt@otOyc{AisDsiq@fyw@atlAlkLc_xBd~_A_wtCdgh@egsAf~rAgayAjlOci`@cj|Aove@}bpCslsAykNu|uFxsNa{p@~}rAcefAndkAw_w@xcy@_cnAqcSs{uDr}Ku_]hlu@mcKjh^z`LflCmic@xlb@oqhAdjs@oi`Az}v@cvH~zYkmu@rvv@ysMrk^g`u@jgJmn_Ak_c@mysAqss@mfdAzdu@oceAcoGmnnDfnPatjBhl`@of_AooJmslBnlg@{vz@kxR{`hBsp_@uenAgxe@_ePqbi@o_NskzAoeg@yybAizxDgdlCks~C';
		var route2 = {"type":"Feature","properties":{},"geometry":{"type":"LineString","coordinates":[[4.35717,52.01144000000001],[5.430720000000001,52.051950000000005],[6.490240000000001,51.79896],[6.896050000000001,51.299620000000004],[7.285270000000001,50.67804],[7.766260000000001,50.46190000000001],[8.064440000000001,50.401610000000005],[8.34332,50.11262000000001],[9.28504,49.97355],[9.81319,49.747040000000005],[10.598690000000001,49.75916],[11.23515,49.46101],[12.168460000000001,49.00041],[13.121480000000002,48.73753000000001],[13.414370000000002,48.36244000000001],[13.677380000000001,48.188660000000006],[14.0371,48.190450000000006],[14.851170000000002,48.142630000000004],[15.79137,48.18524000000001],[16.42883,48.12238000000001],[17.16503,47.90124],[17.616960000000002,47.644890000000004],[18.05646,47.675810000000006],[18.48347,47.55875],[19.00581,47.400760000000005],[19.62009,46.94344],[19.837470000000003,46.61356000000001],[19.950470000000003,46.425670000000004],[19.971320000000002,46.169720000000005],[19.69885,45.89146],[19.705740000000002,45.618880000000004],[19.90239,45.282300000000006],[20.301660000000002,44.899570000000004],[20.717910000000003,44.57061],[21.02278,44.496860000000005],[21.087320000000002,44.333470000000005],[21.35922,43.95532],[21.89694,43.34239],[22.566300000000002,43.18285],[23.033610000000003,42.861340000000006],[23.68962,42.55462000000001],[23.97828,42.327420000000004],[24.6871,42.20736],[25.45463,42.279210000000006],[25.670550000000002,42.248400000000004],[25.79521,42.068310000000004],[25.899790000000003,41.935190000000006],[26.231430000000003,41.754940000000005],[28.03827,41.197100000000006],[29.00765,41.045820000000006],[29.515340000000002,40.79317],[30.05938,40.73073],[31.009500000000003,40.84526],[31.77811,40.750530000000005],[32.236720000000005,40.659060000000004],[32.32862,40.48669],[32.589040000000004,40.049040000000005],[32.69185,39.77832],[32.84189,39.616820000000004],[33.142790000000005,39.176010000000005],[33.585910000000005,38.895030000000006],[33.98595,38.36003],[34.15775,37.87032000000001],[34.820780000000006,37.505770000000005],[34.85036,37.13588],[35.56125,36.9992],[35.959450000000004,37.00605],[36.24094,36.823910000000005],[36.263270000000006,36.479510000000005],[36.137440000000005,36.04408],[35.94265,35.816520000000004],[35.77998,35.54482],[35.95239,35.307680000000005],[35.900200000000005,35.07233],[35.909110000000005,34.89641],[36.13946,34.68979],[36.496860000000005,34.692190000000004],[36.859460000000006,34.660000000000004],[37.362140000000004,34.44896],[37.626200000000004,34.24031],[37.686620000000005,34.08348],[37.894850000000005,33.86347],[38.257180000000005,33.623200000000004],[39.37191,33.15601],[39.930600000000005,33.01066],[40.616640000000004,33.049960000000006],[41.21403,33.05201],[41.822700000000005,33.07419],[42.092060000000004,32.38694],[42.249190000000006,32.04625],[41.967870000000005,31.740420000000004],[41.555530000000005,31.595350000000003],[41.45882,31.415070000000004],[41.19892,31.021570000000004],[40.787060000000004,30.820140000000002],[40.399550000000005,30.446060000000003],[40.208690000000004,29.99424],[39.88593,29.700630000000004],[39.5247,29.824080000000002],[39.074490000000004,29.90509],[38.826980000000006,29.74058],[38.16216,29.16955],[37.76699,28.70888],[37.46828,28.48081],[36.63985,28.42498],[36.296380000000006,28.30094],[36.020680000000006,28.13594],[36.010540000000006,27.807420000000004],[35.968210000000006,27.573430000000002],[35.790240000000004,27.482560000000003],[35.652800000000006,27.390800000000002],[35.583740000000006,27.491860000000003],[34.4388,26.94459],[33.93332,26.70155],[33.975950000000005,26.61699],[34.12628,26.38484],[34.25721,26.145100000000003],[34.339670000000005,25.98983],[34.543530000000004,25.721480000000003],[34.560810000000004,25.680390000000003],[34.93128,25.00129],[35.276340000000005,24.366670000000003],[35.461180000000006,23.664830000000002],[35.676010000000005,22.852710000000002],[36.53332,22.297230000000003],[37.09458,21.15724],[37.05351,20.654380000000003],[37.19995,19.725700000000003],[37.267480000000006,19.27821],[37.08543,19.0344],[36.927870000000006,18.92679],[36.757830000000006,18.602970000000003],[36.35676,18.32517],[34.97231,18.017750000000003],[34.313210000000005,17.692320000000002],[34.07285,17.679350000000003],[33.96949,17.508290000000002],[33.740410000000004,16.955650000000002],[33.11423,16.49613],[32.797450000000005,16.30226],[32.59201,16.04017],[32.52018,15.696990000000001],[31.92086,15.112900000000002],[30.677000000000003,13.89094],[30.48655,13.827250000000001],[30.325160000000004,13.558200000000001],[30.07316,12.931170000000002],[29.673080000000002,11.96887],[29.667260000000002,11.435670000000002],[29.376800000000003,11.185910000000002],[29.318780000000004,10.66449],[29.410880000000002,9.95616],[29.14777,9.344510000000001],[28.82449,9.39822],[28.446990000000003,9.075990000000001],[28.27334,8.91958],[28.241830000000004,8.813490000000002],[28.13576,8.64253],[27.983480000000004,8.20284],[27.979370000000003,7.776660000000001],[28.721380000000003,7.260840000000001],[29.913510000000002,6.61502],[30.589930000000003,6.461970000000001],[30.666880000000003,6.062130000000001],[30.848190000000002,5.793310000000001],[30.942860000000003,5.6869000000000005],[30.932330000000004,5.57533],[30.64525,5.44606],[30.521120000000003,5.236090000000001],[30.67977,5.099710000000001],[31.138,4.99938],[31.49152,4.866630000000001],[31.599980000000002,4.850280000000001]]}};
		var polyStyle = {
			color: 'black',
			opacity: 0.9
		}
		poly = L.layerGroup([
			L.Polyline.fromEncoded(encoded1, polyStyle),
			L.geoJson(route2, {
				style: polyStyle
			})

		]).addTo(map);

		if (false) {
			var directionsService = new google.maps.DirectionsService();
			directionsService.route({
				origin: 'Delft, The Netherlands',
				waypoints: [
					{ location: 'Istanbul'}
				],
				destination: 'Juba',
				travelMode: google.maps.DirectionsTravelMode.DRIVING
			}, function(response, status) {
				if (status !== google.maps.DirectionsStatus.OK) {
					return;
				}
				var encoded = response.routes[0].overview_polyline.points;
				console.log(encoded);
				route = L.Polyline.fromEncoded(encoded).addTo(map);
			});
			
		}


	</script>
</body>
</html>
